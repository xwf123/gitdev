(function(e,t,n){var r={},i="Eswitch",s="easySwitch";r[i]=function(e,n){var r=this,i;this.container=e;var o=t.extend({},t.fn[s].defaults,n);this.timer=null,this.startIndex=o.startIndex,this.switchWrapperName=o.switchWrapperName,this.switchItemName=o.switchItemName,this.switchNumberName=o.switchNumberName,this.prevBtnName=o.prevBtnName,this.nextBtnName=o.nextBtnName,this.containerHeight=o.containerHeight,this.containerWidth=o.containerWidth,i=e.find("."+this.switchItemName+" img").eq(this.startIndex),i.parents("."+this.switchItemName).addClass("prev"),this.width=this.containerWidth||this.container.width()||i.width(),this.height=this.containerHeight||this.container.height()||i.height(),this.itemsLen=this.container.find("."+this.switchItemName).length,this.timer=null,this.isAnimating=!1,this.intervalTime=o.intervalTime,this.effectDuration=o.effectDuration,this.isPlayNumber=o.isPlayNumber,this.isDirbtn=o.isDirbtn,this.isHoverPause=o.isHoverPause,this.effect=o.effect,this.moveDirection=o.moveDirection,this.moveLenConfig={left:r.width,top:r.height},this.moveLen=this.moveLenConfig[this.moveDirection],this.moveAnimateConfig={currentE:{animate:{},css:{}},prevE:{animate:{},css:{}}},this.moveAnimateConfig.currentE.animate[r.moveDirection]=0,this.moveAnimateConfig.prevE.animate[r.moveDirection]=0,this.moveAnimateConfig.currentE.css[r.moveDirection]=0,this.init()},r[i].prototype={constructor:r[i],init:function(){var e=this;this.setContainerStyle(),this.isPlayNumber&&this.renderPlayNumber(),this.isDirbtn&&this.renderDirectionBtn(),this.autoSwitch(),this.isHoverPause&&this.container.on("mouseover",function(){e.stopSwitch()}).on("mouseout",function(){e.autoSwitch()})},setContainerStyle:function(){var e=this;this.container.css({width:e.width,height:e.height})},createSwitchWrapper:function(){return this.isSwitchWrapperCreated?!1:(this.isSwitchWrapperCreated=!0,'<div class="'+this.switchWrapperName+'" style="width:'+this.width+"px;height:"+this.height+'px"></div>')},createPlayNumber:function(){var e=0,t=this.itemsLen,n='<div class="'+this.switchNumberName+'">';for(;e<t;e++)e===this.startIndex?n+='<a href="#" class="current">'+(e+1)+"</a>":n+='<a href="#">'+(e+1)+"</a>";return n+="</div>",n},renderPlayNumber:function(){var e=this.createSwitchWrapper(),t=this;e&&this.container.wrap(e),this.container.parent().append(t.createPlayNumber()),this.playNumberEvent()},playNumberEvent:function(){var e=this;this.container.parent().find("."+this.switchNumberName).on("click","a",function(n){n.preventDefault(),e.gotoIndex(t(this).index(),e.startIndex,"")})},playNumber:function(e){this.container.parent().find("."+this.switchNumberName).find("a").eq(e).addClass("current").siblings().removeClass("current")},gotoIndex:function(e,t,n){this.stopSwitch(),this.scroll(e,t,n),this.autoSwitch()},createDirectionBtn:function(){return'<a href="#" class="'+this.prevBtnName+'">上一张</a><a href="#" class="'+this.nextBtnName+'">下一张</a>'},renderDirectionBtn:function(){var e=this.createSwitchWrapper(),t=this;e&&this.container.wrap(e),this.container.parent().append(t.createDirectionBtn()),this.prevBtnEvent(),this.nextBtnEvent()},prevBtnEvent:function(){var e=this,t;this.container.parent().find("."+this.prevBtnName).on("click",function(n){n.preventDefault(),t=e.getPrev(e.startIndex),e.gotoIndex(t,e.startIndex,-1)})},nextBtnEvent:function(){var e=this,t;this.container.parent().find("."+this.nextBtnName).on("click",function(n){n.preventDefault(),t=e.getNext(e.startIndex),e.gotoIndex(t,e.startIndex,1)})},getDirection:function(e,t){var n=e-t;return n>=1?1:n<0?-1:0},getPrev:function(e){return e===0?this.itemsLen-1:e-1},getNext:function(e){return e+1===this.itemsLen?0:e+1},getMoveDistance:function(e,t,n){var r=this.moveLen;return n===""?this.timer?r:this.getDirection(e,t)*r:n*r},scroll:function(e,n,r){if(this.isAnimating)return;this.isAnimating=!0,this.startIndex=e;var i=this,s=0,o=this.container,u=o.find("."+this.switchItemName).eq(e),a=o.find("."+this.switchItemName).eq(n),f,l;o.find("."+this.switchItemName).removeClass("current prev"),this.effect==="moveEffect"&&(s=this.getMoveDistance(e,n,r),i.moveAnimateConfig.currentE.css[i.moveDirection]=s+"px",i.moveAnimateConfig.prevE.animate[i.moveDirection]=-s+"px",f=u.addClass("current").css(i.moveAnimateConfig.currentE.css).stop(!0,!0).animate(i.moveAnimateConfig.currentE.animate,i.effectDuration,"linear",function(){t(this).siblings().removeClass("prev").attr("style",""),t(this).css("z-index","1")}).promise(),l=a.addClass("prev").stop(!0,!0).animate(i.moveAnimateConfig.prevE.animate,i.effectDuration,"linear",function(){t(this).attr("style","")}).promise()),this.effect==="fadeEffect"&&(f=u.stop(!0,!0).fadeIn(i.effectDuration).promise(),l=a.stop(!0,!0).fadeOut(i.effectDuration).promise()),t.when(f,l).done(function(){i.isAnimating=!1,i.isPlayNumber&&i.playNumber(e)})},autoSwitch:function(){var e=this,t;this.timer=setInterval(function(){t=e.startIndex,e.startIndex=e.getNext(e.startIndex),e.scroll(e.startIndex,t,1)},e.intervalTime)},stopSwitch:function(){var e=this;this.timer&&(clearInterval(e.timer),e.timer=null)}},t.fn[s]=function(e){if(typeof e=="string"){if(e==="api")return t(this).data("plugin-"+s);throw new Error('error string ,here supports "api" only!')}return this.each(function(){var n=t(this),o=new r[i](n,e);if(!n.data("plugin-"+s))return n.data("plugin-"+s,o)})},t.fn[s].defaults={switchWrapperName:"switch-wrapper",switchItemName:"switch-item",switchNumberName:"switch-number",prevBtnName:"switch-prev",nextBtnName:"switch-next",effect:"moveEffect",moveDirection:"left",containerWidth:0,containerHeight:0,isHoverPause:!0,isPlayNumber:!0,isDirbtn:!0,startIndex:0,intervalTime:3e3,effectDuration:800}})(window,jQuery);